<div class="container">
  <div class="row">
    <div class="col-md-6">
      <h1>Registration</h1>
      <p class="lead">If you already a member, please <a routerLink="/login">sign in</a> instead.</p>

      <p class="lead">Select your role:</p>

      <div class="form-group">
        <select
          class="form-control"
          id="roleSelect"
          [(ngModel)]="roleSelected"
          [ngModelOptions]="{standalone: true}">
            <option [ngValue]="'landlord'">Landlord</option>
            <option [ngValue]="'tenan'">Tenan</option>
        </select>
      </div>

      <form
        (submit)="register(f)"
        *ngIf="roleSelected"
        #f="ngForm">
        <div class="form-group">
          <label for="name">First name</label>
          <input
            type="text"
            class="form-control"
            name="first_name"
            placeholder="Your first name"
            required
            ngModel>
          </div>
        <div class="form-group">
          <label for="name">Last name</label>
          <input 
            type="text"
            class="form-control"
            name="last_name"
            placeholder="Your last name"
            required
            ngModel>
        </div>
        <div class="form-group" *ngIf="roleSelected === 'tenan'">
          <label for="email">Phone</label>
          <input
            type="text"
            class="form-control"
            name="phone"
            placeholder="+380984499222" 
            required="roleSelected === 'tenan'"
            minlength="13"
            maxlength="13"
            pattern="^\+[0-9]+"
            ngModel>
        </div>
        <div class="form-group">
          <label for="name">Email</label>
          <input
            type="email"
            class="form-control"
            name="email"
            placeholder="Enter your email"
            required
            pattern='^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$'
            ngModel>
        </div>
        <div class="form-group">
          <label for="password">Password</label>
          <input
            type="password"
            class="form-control"
            name="password"
            placeholder="Password"
            required
            minlength="8"
            ngModel>
        </div>
        <div class="form-group" *ngIf="roleSelected === 'tenan'">
          <div class="form-check">
            <input
              type="checkbox"
              class="form-check-input"
              id="confirmNotBroker"
              [(ngModel)]="confirmNotBroker"
              [ngModelOptions]="{standalone: true}">
            <label
              class="form-check-label"
              for="confirmNotBroker">I confirm that I am not a broker.</label>
          </div>
        </div>
        <button
          type="submit"
          class="btn btn-warning"
          [disabled]="!f.valid || (roleSelected === 'tenan' && !confirmNotBroker)">Register!</button>
      </form>
    </div>
  </div>
</div>